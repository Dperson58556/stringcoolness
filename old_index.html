<!DOCTYPE html>
<html>
  <head>
    <title>String Scorer</title>
    <style>
      body { font-family: monospace; background: #111; color: #eee; }
      .string { margin: 6px 0; }
      .repeat-2 { color: yellow; }
      .repeat-3 { color: orange; }
      .repeat-4 { color: red; }
      .repeat-5 { color: magenta; }
      .repeat-6 { color: purple; }
      .repeat-7 { color: blue; }
      .repeat-8 { color: cyan; }
      .repeat-9 { color: lightgreen; }
      .repeat-10 { color: green; }
      .repeat-11 { color: black; }
    </style>
  </head>
  <body>

    <h1>String Scorer</h1>

    <label>
      Length:
      <input id="length" type="number" value="8">
    </label>
    <button onclick="generate()">Generate</button>

    <div id="results"></div>

    <script>
    async function generate() {
      const length = document.getElementById("length").value;
      const res = await fetch(`/generate?length=${length}`);
      const data = await res.json();

      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      data.forEach(item => {
        let html = "";
        const counts = {};

        item.repeated_chars.forEach(rc => {
          counts[rc.char] = rc.count;
        });

        for (let ch of item.string) {
          const count = counts[ch] || 1;
          html += `<span class="repeat-${count}">${ch}</span>`;
        }

        resultsDiv.innerHTML += `
          <div class="string">
            ${html}
            â€” ${item.points.toFixed(2)}
          </div>`;
      });
    }
    </script>

  </body>
</html>
